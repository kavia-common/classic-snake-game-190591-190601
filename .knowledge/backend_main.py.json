{"is_source_file": true, "format": "Python", "description": "This source file implements a backend API server for a Snake game score system. It uses FastAPI to define endpoints for health check, submitting scores, and retrieving top scores, with in-memory storage for simplicity.", "external_files": ["fastapi", "pydantic", "typing", "datetime", "os", "uvicorn"], "external_methods": ["FastAPI()", "HTTPException()", "Field()", "list()", "sorted()", "drop()", "os.getenv()", "datetime.now()", "uvicorn.run()"], "published": ["GET /api/health", "GET /api/scores", "POST /api/scores"], "classes": [{"name": "ScoreIn", "description": "Data model for incoming score submissions with validation rules."}, {"name": "ScoreOut", "description": "Data model for outgoing score data including timestamp."}], "methods": [{"name": "health()", "description": "Health check endpoint for liveness probe.", "scope": "", "scopeKind": ""}, {"name": "get_scores(limit: Optional[int] = 10)", "description": "Retrieve top N scores sorted by score and timestamp.", "scope": "", "scopeKind": ""}, {"name": "post_score(score: ScoreIn)", "description": "Validate and store a new score submission.", "scope": "", "scopeKind": ""}], "calls": ["FastAPI()", "HTTPException()", "Field()", "sorted()", "datetime.now()", "uvicorn.run()"], "search-terms": ["Snake Scores API", "score submission", "in-memory score list", "FastAPI endpoints", "score ranking", "score timestamp", "score validation"], "state": 2, "file_id": 5, "knowledge_revision": 14, "git_revision": "f09cde6cfd8dc6aac49fb90fd24248eabc1a8548", "revision_history": [{"12": "f09cde6cfd8dc6aac49fb90fd24248eabc1a8548"}, {"14": "f09cde6cfd8dc6aac49fb90fd24248eabc1a8548"}], "ctags": [{"_type": "tag", "name": "MAX_SCORES", "path": "/home/kavia/workspace/code-generation/classic-snake-game-190591-190601/backend/main.py", "pattern": "/^MAX_SCORES = 100  # prune to last 100 entries$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "SCORES", "path": "/home/kavia/workspace/code-generation/classic-snake-game-190591-190601/backend/main.py", "pattern": "/^SCORES: List[dict] = []$/", "language": "Python", "typeref": "typename:List[dict]", "kind": "variable"}, {"_type": "tag", "name": "ScoreIn", "path": "/home/kavia/workspace/code-generation/classic-snake-game-190591-190601/backend/main.py", "pattern": "/^class ScoreIn(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ScoreOut", "path": "/home/kavia/workspace/code-generation/classic-snake-game-190591-190601/backend/main.py", "pattern": "/^class ScoreOut(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/classic-snake-game-190591-190601/backend/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "frontend_url", "path": "/home/kavia/workspace/code-generation/classic-snake-game-190591-190601/backend/main.py", "pattern": "/^frontend_url = os.getenv(\"FRONTEND_ORIGIN\", \"http:\\/\\/localhost:3000\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "get_scores", "path": "/home/kavia/workspace/code-generation/classic-snake-game-190591-190601/backend/main.py", "pattern": "/^def get_scores(limit: Optional[int] = 10):$/", "language": "Python", "kind": "function", "signature": "(limit: Optional[int] = 10)"}, {"_type": "tag", "name": "health", "path": "/home/kavia/workspace/code-generation/classic-snake-game-190591-190601/backend/main.py", "pattern": "/^def health():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/classic-snake-game-190591-190601/backend/main.py", "pattern": "/^    name: str = Field(..., description=\"Player name\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "ScoreOut", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/classic-snake-game-190591-190601/backend/main.py", "pattern": "/^    name: str = Field(..., description=\"Player name\", min_length=1, max_length=32)$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "ScoreIn", "scopeKind": "class"}, {"_type": "tag", "name": "origins", "path": "/home/kavia/workspace/code-generation/classic-snake-game-190591-190601/backend/main.py", "pattern": "/^origins = list({frontend_url, \"http:\\/\\/localhost:3000\", \"https:\\/\\/localhost:3000\"})$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "port", "path": "/home/kavia/workspace/code-generation/classic-snake-game-190591-190601/backend/main.py", "pattern": "/^    port = int(os.getenv(\"PORT\", \"3001\"))$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "post_score", "path": "/home/kavia/workspace/code-generation/classic-snake-game-190591-190601/backend/main.py", "pattern": "/^def post_score(score: ScoreIn):$/", "language": "Python", "kind": "function", "signature": "(score: ScoreIn)"}, {"_type": "tag", "name": "score", "path": "/home/kavia/workspace/code-generation/classic-snake-game-190591-190601/backend/main.py", "pattern": "/^    score: int = Field(..., description=\"Player score\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "ScoreOut", "scopeKind": "class"}, {"_type": "tag", "name": "score", "path": "/home/kavia/workspace/code-generation/classic-snake-game-190591-190601/backend/main.py", "pattern": "/^    score: int = Field(..., description=\"Player score\", ge=0, le=1_000_000)$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "ScoreIn", "scopeKind": "class"}, {"_type": "tag", "name": "ts", "path": "/home/kavia/workspace/code-generation/classic-snake-game-190591-190601/backend/main.py", "pattern": "/^    ts: str = Field(..., description=\"ISO timestamp when the score was recorded\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "ScoreOut", "scopeKind": "class"}], "hash": "60a24aac5572cce5ab84821aa20e16bb", "format-version": 4, "code-base-name": "backend", "filename": "backend/main.py", "fields": [{"name": "MAX_SCORES = 100  # prune to last 100 entries", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "List[dict] SCORES", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "frontend_url = os.getenv(\"FRONTEND_ORIGIN\", \"http:\\/\\/localhost:3000\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str name", "scope": "ScoreOut", "scopeKind": "class", "description": "unavailable"}, {"name": "origins = list({frontend_url, \"http:\\/\\/localhost:3000\", \"https:\\/\\/localhost:3000\"})", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "port = int(os.getenv(\"PORT\", \"3001\"))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int score", "scope": "ScoreOut", "scopeKind": "class", "description": "unavailable"}, {"name": "str ts", "scope": "ScoreOut", "scopeKind": "class", "description": "unavailable"}]}